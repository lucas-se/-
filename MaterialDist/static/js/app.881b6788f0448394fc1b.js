webpackJsonp([1],{"564B":function(e,a){},IcnI:function(e,a,l){"use strict";var t=l("7+uW"),n=l("NYxO");t.default.use(n.a);var i=new n.a.Store({state:{dataShow:[],dataAdded:[],businessValue:""},mutations:{changeDataShow:function(e,a){e.dataShow=a},changeBusinessValue:function(e,a){e.businessValue=a},getAllData:function(e){var a=this;axios.get("/show").then(function(l){e.dataShow=l.data,console.log(a.dataShow)})},deleteData:function(e,a){a.forEach(function(a){e.dataShow.forEach(function(e,l,t){e===a&&t.splice(l,1)})})},deleteDataAdded:function(e,a){a.forEach(function(a){e.dataAdded.forEach(function(e,l,t){e===a&&t.splice(l,1)})})}}});a.a=i},LOib:function(e,a){},M93x:function(e,a,l){"use strict";var t={name:"home",data:function(){return{activeIndex:"1"}},methods:{handleSelect:function(e,a){console.log(e),console.log(a),this.$router.push(e)}}},n={render:function(){var e=this,a=e.$createElement,l=e._self._c||a;return l("div",{attrs:{id:"home"}},[l("div",[l("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":e.activeIndex,mode:"horizontal","background-color":"#2292DD","text-color":"#FFFFFF","active-text-color":"#CDC9C9"},on:{select:e.handleSelect}},[l("el-menu-item",{attrs:{index:"inputVue"}},[e._v("数据登记")]),e._v(" "),l("el-menu-item",{attrs:{index:"showAllVue"}},[e._v("数据查询")]),e._v(" "),l("el-menu-item",{attrs:{index:"summaryTable"}},[e._v("报表查询")])],1)],1),e._v(" "),l("div",{staticClass:"system-title"},[e._v("\n  什地水厂材料管理系统\n  ")])])},staticRenderFns:[]};var i={name:"App",components:{homepage:l("VU/8")(t,n,!1,function(e){l("ownV")},null,null).exports}},s={render:function(){var e=this.$createElement,a=this._self._c||e;return a("div",{attrs:{id:"app"}},[a("homepage",{staticClass:"homepage"}),this._v(" "),a("router-view",{staticClass:"content"})],1)},staticRenderFns:[]};var u=l("VU/8")(i,s,!1,function(e){l("OgeZ")},null,null);a.a=u.exports},NHnr:function(e,a,l){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),function(e){var a=l("7+uW"),t=l("M93x"),n=l("YaEn"),i=l("mtWM"),s=l.n(i),u=l("IcnI"),r=l("zL8q"),o=l.n(r),c=l("tvR6");l.n(c);e.axios=s.a,s.a.defaults.baseURL="http://localhost:3003/material",a.default.config.productionTip=!1,a.default.use(o.a),new a.default({el:"#app",router:n.a,store:u.a,components:{App:t.a},template:"<App/>"})}.call(a,l("DuR2"))},OgeZ:function(e,a){},YaEn:function(e,a,l){"use strict";var t=l("7+uW"),n=l("/ocq"),i={name:"inputVue",data:function(){return{address:["",""],addressOptions:[{value:"同义村",label:"同义村",children:[{value:"一组",label:"一组"},{value:"二组",label:"二组"},{value:"三组",label:"三组"},{value:"四组",label:"四组"},{value:"五组",label:"五组"},{value:"六组",label:"六组"},{value:"七组",label:"七组"},{value:"八组",label:"八组"},{value:"九组",label:"九组"},{value:"十组",label:"十组"},{value:"十一组",label:"十一组"},{value:"十二组",label:"十二组"},{value:"十三组",label:"十三组"},{value:"十四组",label:"十四组"},{value:"十五组",label:"十五组"},{value:"十六组",label:"十六组"},{value:"十七组",label:"十七组"},{value:"十八组",label:"十八组"},{value:"十九组",label:"十九组"},{value:"二十组",label:"二十组"},{value:"二十一组",label:"二十一组"},{value:"二十二组",label:"二十二组"}]},{value:"合结村",label:"合结村",children:[{value:"一组",label:"一组"},{value:"二组",label:"二组"},{value:"三组",label:"三组"},{value:"四组",label:"四组"},{value:"五组",label:"五组"},{value:"六组",label:"六组"},{value:"七组",label:"七组"},{value:"八组",label:"八组"},{value:"九组",label:"九组"},{value:"十组",label:"十组"},{value:"十一组",label:"十一组"},{value:"十二组",label:"十二组"},{value:"十三组",label:"十三组"},{value:"十四组",label:"十四组"},{value:"十五组",label:"十五组"},{value:"十六组",label:"十六组"},{value:"十七组",label:"十七组"},{value:"十八组",label:"十八组"},{value:"十九组",label:"十九组"},{value:"二十组",label:"二十组"},{value:"二十一组",label:"二十一组"},{value:"二十二组",label:"二十二组"}]},{value:"五方村",label:"五方村",children:[{value:"一组",label:"一组"},{value:"二组",label:"二组"},{value:"三组",label:"三组"},{value:"四组",label:"四组"},{value:"五组",label:"五组"},{value:"六组",label:"六组"},{value:"七组",label:"七组"},{value:"八组",label:"八组"},{value:"九组",label:"九组"},{value:"十组",label:"十组"},{value:"十一组",label:"十一组"},{value:"十二组",label:"十二组"},{value:"十三组",label:"十三组"},{value:"十四组",label:"十四组"},{value:"十五组",label:"十五组"},{value:"十六组",label:"十六组"},{value:"十七组",label:"十七组"},{value:"十八组",label:"十八组"},{value:"十九组",label:"十九组"},{value:"二十组",label:"二十组"},{value:"二十一组",label:"二十一组"},{value:"二十二组",label:"二十二组"}]},{value:"红社村",label:"红社村",children:[{value:"一组",label:"一组"},{value:"二组",label:"二组"},{value:"三组",label:"三组"},{value:"四组",label:"四组"},{value:"五组",label:"五组"},{value:"六组",label:"六组"},{value:"七组",label:"七组"},{value:"八组",label:"八组"},{value:"九组",label:"九组"},{value:"十组",label:"十组"},{value:"十一组",label:"十一组"},{value:"十二组",label:"十二组"},{value:"十三组",label:"十三组"},{value:"十四组",label:"十四组"},{value:"十五组",label:"十五组"},{value:"十六组",label:"十六组"},{value:"十七组",label:"十七组"},{value:"十八组",label:"十八组"},{value:"十九组",label:"十九组"},{value:"二十组",label:"二十组"},{value:"二十一组",label:"二十一组"},{value:"二十二组",label:"二十二组"}]},{value:"共和村",label:"共和村",children:[{value:"一组",label:"一组"},{value:"二组",label:"二组"},{value:"三组",label:"三组"},{value:"四组",label:"四组"},{value:"五组",label:"五组"},{value:"六组",label:"六组"},{value:"七组",label:"七组"},{value:"八组",label:"八组"},{value:"九组",label:"九组"},{value:"十组",label:"十组"},{value:"十一组",label:"十一组"},{value:"十二组",label:"十二组"},{value:"十三组",label:"十三组"},{value:"十四组",label:"十四组"},{value:"十五组",label:"十五组"},{value:"十六组",label:"十六组"},{value:"十七组",label:"十七组"},{value:"十八组",label:"十八组"},{value:"十九组",label:"十九组"},{value:"二十组",label:"二十组"},{value:"二十一组",label:"二十一组"},{value:"二十二组",label:"二十二组"}]},{value:"绵河村",label:"绵河村",children:[{value:"一组",label:"一组"},{value:"二组",label:"二组"},{value:"三组",label:"三组"},{value:"四组",label:"四组"},{value:"五组",label:"五组"},{value:"六组",label:"六组"},{value:"七组",label:"七组"},{value:"八组",label:"八组"},{value:"九组",label:"九组"},{value:"十组",label:"十组"},{value:"十一组",label:"十一组"},{value:"十二组",label:"十二组"},{value:"十三组",label:"十三组"},{value:"十四组",label:"十四组"},{value:"十五组",label:"十五组"},{value:"十六组",label:"十六组"},{value:"十七组",label:"十七组"},{value:"十八组",label:"十八组"},{value:"十九组",label:"十九组"},{value:"二十组",label:"二十组"},{value:"二十一组",label:"二十一组"},{value:"二十二组",label:"二十二组"}]},{value:"双瓦村",label:"双瓦村",children:[{value:"一组",label:"一组"},{value:"二组",label:"二组"},{value:"三组",label:"三组"},{value:"四组",label:"四组"},{value:"五组",label:"五组"},{value:"六组",label:"六组"},{value:"七组",label:"七组"},{value:"八组",label:"八组"},{value:"九组",label:"九组"},{value:"十组",label:"十组"},{value:"十一组",label:"十一组"},{value:"十二组",label:"十二组"},{value:"十三组",label:"十三组"},{value:"十四组",label:"十四组"},{value:"十五组",label:"十五组"},{value:"十六组",label:"十六组"},{value:"十七组",label:"十七组"},{value:"十八组",label:"十八组"},{value:"十九组",label:"十九组"},{value:"二十组",label:"二十组"},{value:"二十一组",label:"二十一组"},{value:"二十二组",label:"二十二组"}]}],materialOptions:[{label:"PE给水管",value:"PE给水管",children:[{value:"DN25",label:"DN25"},{value:"DN32",label:"DN32"},{value:"DN40",label:"DN40"},{value:"DN50",label:"DN50"}]},{label:"PE直接",value:"PE直接",children:[{value:"DN25",label:"DN25"},{value:"DN32",label:"DN32"},{value:"DN40",label:"DN40"},{value:"DN50",label:"DN50"},{value:"DN32*25",label:"DN32*25"},{value:"异经40*25",label:"异经40*25"},{value:"异经40*32",label:"异经40*32"},{value:"DN50*32",label:"DN50*32"},{value:"DN63*32",label:"DN63*32"},{value:"DN50*40",label:"DN50*40"},{value:"DN63*40",label:"DN63*40"},{value:"DN63",label:"DN63"},{value:"DN50",label:"DN50"}]},{label:"水表",value:"水表",children:[{value:"DN20",label:"DN20"}]},{label:"加密阀",value:"加密阀",children:[{value:"DN20",label:"DN20"}]},{label:"软密封闸阀",value:"软密封闸阀",children:[{value:"DN20",label:"DN20"},{value:"DN25",label:"DN25"},{value:"DN32",label:"DN32"},{value:"DN150",label:"DN150"},{value:"DN200",label:"DN200"},{value:"DN300",label:"DN300"},{value:"DN50",label:"DN50"},{value:"DN65",label:"DN65"},{value:"DN80",label:"DN80"},{value:"DN40",label:"DN40"},{value:"DN100",label:"DN100"}]},{label:"PE弯头",value:"PE弯头",children:[{value:"DN25",label:"DN25"},{value:"DN32",label:"DN32"},{value:"DN40",label:"DN40"},{value:"DN50",label:"DN50"}]},{label:"PE三通",value:"PE三通",children:[{value:"DN25",label:"DN25"},{value:"DN32",label:"DN32"},{value:"DN40*25",label:"DN40*25"},{value:"DN32*25",label:"DN32*25"},{value:"DN50*40",label:"DN50*40"}]},{label:"管帽",value:"管帽",children:[{value:"DN25",label:"DN25"},{value:"DN32",label:"DN32"}]},{label:"焊刚管",value:"焊刚管",children:[{value:"DN40*1.5",label:"DN40*1.5"},{value:"DN50*1.5",label:"DN50*1.5"}]},{label:"PE外丝直接",value:"PE外丝直接",children:[{value:"DN25*3/4",label:"DN25*3/4"},{value:"DN32",label:"DN32"},{value:"DN40",label:"DN40"},{value:"DN50",label:"DN50"},{value:"DN63",label:"DN63"}]},{label:"PE内丝直接",value:"PE内丝直接",children:[{value:"DN25*3/4",label:"DN25*3/4"},{value:"DN25*1/2",label:"DN25*1/2"},{value:"DN50",label:"DN50"}]},{label:"钢钉卡",value:"钢钉卡",children:[{value:"DN25",label:"DN25"},{value:"DN32",label:"DN32"}]},{label:"井盖井圈",value:"井盖井圈",children:[{value:"重700Q",label:"重700Q"}]},{label:"生料带",value:"生料带",children:[{value:"生料带",label:"生料带"}]}],material:[],num:"",manName:"",pickerOptions:{disabledDate:function(e){return e.getTime()>Date.now()},shortcuts:[{text:"今天",onClick:function(e){e.$emit("pick",new Date)}},{text:"昨天",onClick:function(e){var a=new Date;a.setTime(a.getTime()-864e5),e.$emit("pick",a)}},{text:"一周前",onClick:function(e){var a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",a)}}]},repairDay:"",inputDay:"",infor:"",inforAdded:[],mainId:"",businessOptions:[{value:"materialInfor",label:"维修"},{value:"installInfor",label:"安装"},{value:"receiveInfor",label:"领材料"}],businessValue:""}},methods:{materialInforAdding:function(){this.inputDay=this.getTodayDate();var e={address:this.address[0]+this.address[1],manName:this.manName,materialName:this.material[0],materialType:this.material[1],num:this.num,repairDay:this.repairDay,inputDay:this.inputDay,infor:this.infor};this.inforAdded.push(e),console.log(this.inforAdded)},selectAddedInfor:function(e){this.multipleSelection=e},delectSelectedAddInfor:function(){var e=this;this.multipleSelection.forEach(function(a){e.inforAdded.forEach(function(e,l,t){e===a&&t.splice(l,1)})}),console.log(this.inforAdded)},restart:function(){this.address=["",""],this.manName="",this.material=[],this.inforAdded=[],this.infor="",this.repairDay="",this.num=""},checkAndAdd:function(){this.material[0]&&this.material[0]?this.repairDay?(this.alertMessage("添加数据数据成功","success"),this.materialInforAdding()):this.alertMessage("请选择时间","warning"):this.alertMessage("请选择材料","warning")},alertMessage:function(e,a){this.$message({showClose:!0,message:e,type:a,offset:10,duration:1e3})},checkAndCommit:function(){this.repairDay?this.inforAdded.length?(this.alertMessage("提交数据成功","success"),"materialInfor"!==this.businessValue?("installInfor"===this.businessValue&&this.installDateInput(),"receiveInfor"===this.businessValue&&this.receiveDateInput(),this.material="",this.num="",this.inforAdded=[]):this.repairDateInput()):this.alertMessage("请添加材料","warning"):this.alertMessage("请选择时间","warning")},receiveDateInput:function(){var e=this;this.inforAdded.forEach(function(a){var l="/receiveInforInput?materialName="+a.materialName+"&materialType="+a.materialType+"&inputDay="+a.inputDay+"&day="+a.repairDay+"&num="+a.num;axios.get(l).then(function(e){console.log(e)}).catch(function(){console.log(err)}),e.sumInforUpdate(a)})},sumInforInput:function(){var e=0;this.materialOptions.forEach(function(a){a.children.forEach(function(l){a.value,l.value;e++,console.log(e)})})},sumInforUpdate:function(e){var a="/sumInforUpdate?businessValue="+this.businessValue+"&materialName="+e.materialName+"&materialType="+e.materialType+"&inputDay="+e.inputDay+"&day="+e.repairDay+"&num="+e.num;axios.get(a).then(function(e){console.log(e)}).catch(function(){console.log(err)})},materialDataInput:function(e){console.log("维修材料录入");var a="/materialInforInput?mainId="+this.mainId+"&materialName="+e.materialName+"&materialType="+e.materialType+"&num="+e.num+"&day="+e.repairDay+"&inputDay="+e.inputDay+"&infor="+e.infor+"&address="+e.address+"&manName="+e.manName;axios.get(a).then(function(e){console.log(e)}).catch(function(){console.log(err)})},installDateInput:function(){var e=this;console.log("提交安装数据"),this.inforAdded.forEach(function(a){e.installInforInput(a)})},installInforInput:function(e){var a="/installInforInput?materialName="+e.materialName+"&materialType="+e.materialType+"&num="+e.num+"&day="+e.repairDay+"&inputDay="+e.inputDay+"&infor="+e.infor;axios.get(a).then(function(e){console.log(e)}).catch(function(){console.log(err)})},repairDateInput:function(){var e=this,a="/mainInforInput?manName="+this.manName+"&address="+(this.address[0]+this.address[1])+"&inputDay="+this.inputDay+"&inputDayString="+this.inputDay+"&day="+this.repairDay+"&infor="+this.infor;console.log(a),axios.get(a).then(function(a){e.mainId=a.data.id,e.inforAdded.forEach(function(a){e.materialDataInput(a),e.sumInforUpdate(a)}),e.material="",e.num="",e.inforAdded=[]})},getTodayDate:function(){var e=new Date,a=e.getFullYear(),l=e.getMonth()+1,t=e.getDate();return a+"-"+(l=l<10?"0"+l:l)+"-"+(t=t<10?"0"+t:t)}},computed:{dataAdded:{get:function(){return this.$store.state.dataAdded}}}},s={render:function(){var e=this,a=e.$createElement,l=e._self._c||a;return l("div",{staticClass:"inputVue"},[l("div",{staticClass:"form"},[l("div",{staticClass:"mainInfor-input"},[l("div",{staticClass:"title"},[e._v("\n             业务办理\n          ")]),e._v(" "),l("div",{staticClass:"mainInfor-input-line"},[l("span",[e._v("地       址")]),e._v(" "),l("el-cascader",{staticStyle:{width:"150px"},attrs:{options:e.addressOptions,props:{expandTrigger:"hover"},placeholder:"地址"},model:{value:e.address,callback:function(a){e.address=a},expression:"address"}})],1),e._v(" "),l("div",{staticClass:"mainInfor-input-line"},[l("span",[e._v("姓       名")]),e._v(" "),l("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"姓名"},model:{value:e.manName,callback:function(a){e.manName=a},expression:"manName"}})],1),e._v(" "),l("div",{staticClass:"mainInfor-input-line"},[l("span",[e._v("日       期")]),e._v(" "),l("el-date-picker",{staticStyle:{width:"150px"},attrs:{align:"right",type:"date",placeholder:"维修日期","picker-options":e.pickerOptions,"value-format":"yyyy-MM-dd"},model:{value:e.repairDay,callback:function(a){e.repairDay=a},expression:"repairDay"}})],1),e._v(" "),l("div",{staticClass:"mainInfor-input-line"},[l("span",[e._v("备注信息")]),e._v(" "),l("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"备注信息"},model:{value:e.infor,callback:function(a){e.infor=a},expression:"infor"}})],1)]),e._v(" "),l("div",{staticClass:"materialInfor-input"},[l("div",[l("span",[e._v("业务类型")]),e._v(" "),l("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"业务类型"},model:{value:e.businessValue,callback:function(a){e.businessValue=a},expression:"businessValue"}},e._l(e.businessOptions,function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),l("span",[e._v("使用材料")]),e._v(" "),l("el-cascader",{staticStyle:{width:"250px"},attrs:{options:e.materialOptions,props:{expandTrigger:"hover"},placeholder:"材料名称-规格"},model:{value:e.material,callback:function(a){e.material=a},expression:"material"}}),e._v(" "),l("span",[e._v("数       量")]),e._v(" "),l("el-input",{staticStyle:{width:"170px"},attrs:{placeholder:"数量"},model:{value:e.num,callback:function(a){e.num=a},expression:"num"}}),e._v(" "),l("el-button",{attrs:{type:"success"},on:{click:function(a){return e.checkAndAdd()}}},[e._v("添加材料")])],1),e._v(" "),l("div",{staticClass:"table-material"},[l("el-table",{staticStyle:{width:"100%"},attrs:{data:e.inforAdded,border:"",height:"220"}},[l("el-table-column",{attrs:{prop:"materialName",label:"材料名称",width:"100"}}),e._v(" "),l("el-table-column",{attrs:{prop:"materialType",label:"材料型号",width:"100"}}),e._v(" "),l("el-table-column",{attrs:{prop:"num",label:"数量",width:"110"}})],1)],1)])]),e._v(" "),l("div",{staticClass:"infor-input-show"},[l("div",{staticClass:"infor-title"},[e._v("详情")]),e._v(" "),l("div",{staticClass:"infor"},[l("el-descriptions",{attrs:{column:4}},[l("el-descriptions-item",{attrs:{label:"姓名"}},[e._v(e._s(this.manName))]),e._v(" "),l("el-descriptions-item",{attrs:{label:"地址"}},[e._v(e._s(this.address[0]+this.address[1]))]),e._v(" "),l("el-descriptions-item",{attrs:{label:"日期"}},[e._v(e._s(this.repairDay))]),e._v(" "),l("el-descriptions-item",{attrs:{label:"备注"}},[e._v(e._s(this.infor))])],1)],1),e._v(" "),l("div",{staticClass:"infor-title"},[e._v("材料领取/使用情况")]),e._v(" "),l("div",{staticClass:"materila-infor"},[l("el-table",{staticStyle:{width:"100%"},attrs:{data:e.inforAdded,height:"250",border:""},on:{"selection-change":e.selectAddedInfor}},[e._v(">\n              "),l("el-table-column",{attrs:{type:"selection",align:"center",width:"70"}}),e._v(" "),l("el-table-column",{attrs:{fixed:"",prop:"materialName",label:"材料名称",align:"center",width:"210"}}),e._v(" "),l("el-table-column",{attrs:{prop:"materialType",label:"材料规格",align:"center",width:"210"}}),e._v(" "),l("el-table-column",{attrs:{prop:"num",label:"数量",align:"center",width:"210"}}),e._v(" "),l("el-table-column",{attrs:{prop:"infor",label:"备注",align:"center",width:"210"}})],1)],1)]),e._v(" "),l("div",{staticClass:"btn"},[l("el-button",{attrs:{type:"success",round:""},on:{click:function(a){return e.checkAndCommit()}}},[e._v("提交数据")]),e._v(" "),l("el-button",{attrs:{type:"success",round:""},on:{click:function(a){return e.delectSelectedAddInfor()}}},[e._v("删除选中数据")]),e._v(" "),l("el-button",{attrs:{type:"success",round:""},on:{click:function(a){return e.restart()}}},[e._v("删除数据")]),e._v(" "),l("el-button",{attrs:{type:"success",round:""},on:{click:function(a){return e.sumInforInput()}}},[e._v("test")])],1)])},staticRenderFns:[]};var u=l("VU/8")(i,s,!1,function(e){l("afY/")},"data-v-defef28e",null).exports,r={name:"selectorvue",data:function(){return{pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var a=new Date,l=new Date;l.setTime(l.getTime()-6048e5),e.$emit("pick",[l,a])}},{text:"最近一个月",onClick:function(e){var a=new Date,l=new Date;l.setTime(l.getTime()-2592e6),e.$emit("pick",[l,a])}},{text:"最近三个月",onClick:function(e){var a=new Date,l=new Date;l.setTime(l.getTime()-7776e6),e.$emit("pick",[l,a])}}]},date:"",inputDay:"",nameOptions:[{label:"所有材料",type:["所有型号","DN25","DN32","DN40","DN50"]},{label:"PE给水管",type:["所有型号","DN25","DN32","DN40","DN50"]},{label:"PE直接",type:["所有型号","DN25","DN32","DN40","DN50","DN32*25","异经40*25","异经40*32","DN50*32","DN63*32","DN50*40","DN63*40","DN63","DN50"]},{label:"水表",type:["所有型号","DN20"]},{label:"加密阀",type:["所有型号","DN20"]},{label:"软密封闸阀",type:["所有型号","DN20","DN25","DN32","DN150","DN200","DN300","DN50","DN65","DN80","DN40","DN100"]},{label:"PE弯头",type:["所有型号","DN25","DN32","DN40","DN50"]},{label:"PE三通",type:["所有型号","DN25","DN32","DN40*25","DN32*25","DN50*40"]},{label:"管帽",type:["所有型号","DN25","DN32"]},{label:"焊刚管",type:["所有型号","DN40*1.5","DN50*1.5"]},{label:"PE外丝直接",type:["所有型号","DN25*3/4","DN32","DN40","DN50","DN63"]},{label:"PE内丝直接",type:["所有型号","DN25*3/4","DN25*1/2","DN50"]},{label:"钢钉卡",type:["所有型号","DN32","DN25"]},{label:"井盖井圈",type:["所有型号","重700Q"]},{label:"生料带",type:[]}],nameIndex:0,type:"",businessOptions:[{value:"materialInfor",label:"维修"},{value:"installInfor",label:"安装"},{value:"receiveInfor",label:"领材料"},{value:"sumInfor",label:"库存"}]}},methods:{alertMessage:function(e,a){this.$message({showClose:!0,message:e,type:a,offset:10,duration:1e3})},changeName:function(){this.type=""},selectData:function(){var e=this;if(this.businessValue){console.log(this.businessValue),console.log("搜索");var a="/selector?businessValue="+this.businessValue;"所有材料"!==this.nameOptions[this.nameIndex].label&&(a+="&materialName="+this.nameOptions[this.nameIndex].label),"所有型号"!==this.type&&(a+="&materialType="+this.type),this.date&&"sumInfor"!=this.businessValue&&(a+="&dateStart="+this.date[0]+"&dateEnd="+this.date[1]),this.inputDay&&"sumInfor"!=this.businessValue&&(a+="&inputDayStart="+this.inputDay[0]+"&inputDayEnd="+this.inputDay[1]),axios.get(a).then(function(a){e.dataShow=a.data,console.log(e.dataShow)})}else this.alertMessage("请选择业务类型","warning")}},computed:{dataShow:{get:function(){return this.$store.state.dataShow},set:function(e){this.$store.commit("changeDataShow",e)}},businessValue:{get:function(){return this.$store.state.businessValue},set:function(e){this.$store.commit("changeBusinessValue",e)}}}},o={render:function(){var e=this,a=e.$createElement,l=e._self._c||a;return l("div",{staticClass:"selectorvue"},[l("div",[e._v("筛选数据")]),e._v(" "),l("div",[l("span",[e._v("业务类型")]),e._v(" "),l("el-select",{staticClass:"dataselect",attrs:{placeholder:"业务类型"},model:{value:e.businessValue,callback:function(a){e.businessValue=a},expression:"businessValue"}},e._l(e.businessOptions,function(e){return l("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),l("div",[l("span",[e._v("材料名称")]),e._v(" "),l("el-select",{staticClass:"dataselect",attrs:{placeholder:"请选择"},on:{change:e.changeName},model:{value:e.nameIndex,callback:function(a){e.nameIndex=a},expression:"nameIndex"}},e._l(e.nameOptions,function(e,a){return l("el-option",{key:a,attrs:{label:e.label,value:a}})}),1)],1),e._v(" "),l("div",[l("span",[e._v("材料型号")]),e._v(" "),l("el-select",{staticClass:"dataselect",attrs:{placeholder:"请选择"},model:{value:e.type,callback:function(a){e.type=a},expression:"type"}},e._l(e.nameOptions[e.nameIndex].type,function(e,a){return l("el-option",{key:a,attrs:{label:e,value:e}})}),1)],1),e._v(" "),l("div",[l("span",[e._v("入库日期")]),e._v(" "),l("el-date-picker",{staticClass:"dataselect",attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"记录开始日期","end-placeholder":"记录结束日期","picker-options":e.pickerOptions,"value-format":"yyyy-MM-dd"},model:{value:e.inputDay,callback:function(a){e.inputDay=a},expression:"inputDay"}})],1),e._v(" "),l("div",[l("span",[e._v("使用日期")]),e._v(" "),l("el-date-picker",{staticClass:"dataselect",attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"使用开始日期","end-placeholder":"使用结束日期","picker-options":e.pickerOptions,"value-format":"yyyy-MM-dd"},model:{value:e.date,callback:function(a){e.date=a},expression:"date"}})],1),e._v(" "),l("el-button",{attrs:{type:"primary",round:""},on:{click:function(a){return e.selectData()}}},[e._v("搜索")])],1)},staticRenderFns:[]};var c={name:"showAllVue",data:function(){return{multipleSelection:[],isEdit:!1}},components:{selectorVue:l("VU/8")(r,o,!1,function(e){l("564B")},"data-v-157dd340",null).exports},mounted:function(){},methods:{test:function(e){this.multipleSelection=e},edit:function(e){console.log(e),this.ChangeEditState()},ChangeEditState:function(){this.isEdit=!this.isEdit},alertMessage:function(e,a){this.$message({showClose:!0,message:e,type:a,offset:10,duration:1e3})},deleteData:function(){var e=this;console.log("删除成功"),"sumInfor"!=this.businessValue?(this.multipleSelection.forEach(function(a){e.deleteApi(a.id),e.sumInforUpdate(a)}),this.$store.commit("deleteData",this.multipleSelection),console.log(this.dataShow)):this.alertMessage("库存数据不能删除","warning")},deleteApi:function(e){var a="/delete?businessValue="+this.businessValue+"&id="+e;axios.get(a).then(function(e){})},showAllData:function(){var e=this;console.log("拿到数据成功");axios.get("/show").then(function(a){e.dataShow=a.data}).catch(function(e){console.log(e)})},sumInforUpdate:function(e){var a="";"materialInfor"==this.businessValue?a="receiveInfor":"receiveInfor"==this.businessValue&&(a="materialInfor");var l="/sumInforUpdate?businessValue="+a+"&materialName="+e.materialName+"&materialType="+e.materialType+"&inputDay="+e.inputDayString+"&day="+e.dayString+"&num="+e.num;axios.get(l).then(function(e){console.log(e)}).catch(function(){console.log(err)})}},computed:{dataShow:{get:function(){return this.$store.state.dataShow},set:function(e){this.$store.commit("changeDataShow",e)}},businessValue:{get:function(){return this.$store.state.businessValue},set:function(e){this.$store.commit("changeBusinessValue",e)}}}},v={render:function(){var e=this,a=e.$createElement,l=e._self._c||a;return l("div",{staticClass:"showAllVue"},[l("div",{staticClass:"inforBox"},[l("div",{staticClass:"title"},[e._v("\n        材料记录\n      ")]),e._v(" "),l("el-table",{staticStyle:{width:"100%"},attrs:{data:e.dataShow,height:"550",border:""},on:{"selection-change":e.test}},[e._v(">\n          "),l("el-table-column",{attrs:{type:"selection",align:"center",width:"60"}}),e._v(" "),l("el-table-column",{attrs:{fixed:"",prop:"materialName",label:"材料名称",align:"center",width:"100"}}),e._v(" "),l("el-table-column",{attrs:{prop:"materialType",label:"材料规格",align:"center",width:"100"}}),e._v(" "),l("el-table-column",{attrs:{prop:"num",label:"数量",align:"center",width:"50"}}),e._v(" "),l("el-table-column",{attrs:{prop:"dayString",label:"日期",align:"center",width:"100"}}),e._v(" "),l("el-table-column",{attrs:{prop:"inputDayString",label:"录入日期",align:"center",width:"100"}}),e._v(" "),l("el-table-column",{attrs:{prop:"infor",label:"备注",align:"left",width:"300"}})],1),e._v(" "),l("div",{staticClass:"btn"},[l("el-button",{attrs:{type:"success",round:""},on:{click:function(a){return e.deleteData()}}},[e._v("删除数据")])],1)],1),e._v(" "),l("selectorVue",{staticClass:"selector"})],1)},staticRenderFns:[]};var d=l("VU/8")(c,v,!1,function(e){l("lp21")},"data-v-14448dd4",null).exports,b={name:"summaryTable",data:function(){return{dataSummaryTable:[],dataSummaryTableNew:[],dataSelected:[],repairDay:"",inputDay:"",pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var a=new Date,l=new Date;l.setTime(l.getTime()-6048e5),e.$emit("pick",[l,a])}},{text:"最近一个月",onClick:function(e){var a=new Date,l=new Date;l.setTime(l.getTime()-2592e6),e.$emit("pick",[l,a])}},{text:"最近三个月",onClick:function(e){var a=new Date,l=new Date;l.setTime(l.getTime()-7776e6),e.$emit("pick",[l,a])}}]},materialOptions:[{label:"PE给水管",value:"PE给水管",children:[{value:"DN25",label:"DN25"},{value:"DN32",label:"DN32"},{value:"DN40",label:"DN40"},{value:"DN50",label:"DN50"}]},{label:"PE直接",value:"PE直接",children:[{value:"DN25",label:"DN25"},{value:"DN32",label:"DN32"},{value:"DN40",label:"DN40"},{value:"DN50",label:"DN50"},{value:"DN32*25",label:"DN32*25"},{value:"异经40*25",label:"异经40*25"},{value:"异经40*32",label:"异经40*32"},{value:"DN50*32",label:"DN50*32"},{value:"DN63*32",label:"DN63*32"},{value:"DN50*40",label:"DN50*40"},{value:"DN63*40",label:"DN63*40"},{value:"DN63",label:"DN63"},{value:"DN50",label:"DN50"}]},{label:"水表",value:"水表",children:[{value:"DN20",label:"DN20"}]},{label:"加密阀",value:"加密阀",children:[{value:"DN20",label:"DN20"}]},{label:"软密封闸阀",value:"软密封闸阀",children:[{value:"DN20",label:"DN20"},{value:"DN25",label:"DN25"},{value:"DN32",label:"DN32"},{value:"DN150",label:"DN150"},{value:"DN200",label:"DN200"},{value:"DN300",label:"DN300"},{value:"DN50",label:"DN50"},{value:"DN65",label:"DN65"},{value:"DN80",label:"DN80"},{value:"DN40",label:"DN40"},{value:"DN100",label:"DN100"}]},{label:"PE弯头",value:"PE弯头",children:[{value:"DN25",label:"DN25"},{value:"DN32",label:"DN32"},{value:"DN40",label:"DN40"},{value:"DN50",label:"DN50"}]},{label:"PE三通",value:"PE三通",children:[{value:"DN25",label:"DN25"},{value:"DN32",label:"DN32"},{value:"DN40*25",label:"DN40*25"},{value:"DN32*25",label:"DN32*25"},{value:"DN50*40",label:"DN50*40"}]},{label:"管帽",value:"管帽",children:[{value:"DN25",label:"DN25"},{value:"DN32",label:"DN32"}]},{label:"焊刚管",value:"焊刚管",children:[{value:"DN40*1.5",label:"DN40*1.5"},{value:"DN50*1.5",label:"DN50*1.5"}]},{label:"PE外丝直接",value:"PE外丝直接",children:[{value:"DN25*3/4",label:"DN25*3/4"},{value:"DN32",label:"DN32"},{value:"DN40",label:"DN40"},{value:"DN50",label:"DN50"},{value:"DN60",label:"DN60"}]},{label:"PE内丝直接",value:"PE内丝直接",children:[{value:"DN25*3/4",label:"DN25*3/4"},{value:"DN25*1/2",label:"DN25*1/2"},{value:"DN50",label:"DN50"}]},{label:"钢钉卡",value:"钢钉卡",children:[{value:"DN25",label:"DN25"},{value:"DN32",label:"DN32"}]},{label:"井盖井圈",value:"井盖井圈",children:[{value:"重700Q",label:"重700Q"}]},{label:"生料带",value:"生料带",children:[{value:"生料带",label:"生料带"}]}],businessOptions:[{value:"materialInfor",label:"维修"},{value:"installInfor",label:"安装"},{value:"receiveInfor",label:"领材料"},{value:"sumInfor",label:"库存"}],businessValue:""}},methods:{addNum:function(e,a){var l,t,n;try{l=e.toString().split(".")[1].length}catch(e){l=0}try{t=a.toString().split(".")[1].length}catch(e){t=0}return(e*(n=Math.pow(10,Math.max(l,t)))+a*n)/n},alertMessage:function(e,a){this.$message({showClose:!0,message:e,type:a,offset:10,duration:1e3})},selectData:function(){var e=this;if(console.log("搜索"),console.log(this.businessValue),this.businessValue){var a="/selector?businessValue="+this.businessValue;this.repairDay&&(a+="&dateStart="+this.repairDay[0]+"&dateEnd="+this.repairDay[1]),this.inputDay&&(a+="&inputDayStart="+this.inputDay[0]+"&inputDayEnd="+this.inputDay[1]),axios.get(a).then(function(a){e.dataSelected=a.data,console.log(e.dataSelected),console.log(e.dataSelected),e.generateSummaryTable()})}else this.alertMessage("请选择业务类型","warning")},generateSummaryTable:function(){var e=this;this.dataSummaryTable=[];var a=0;this.materialOptions.forEach(function(l){l.children.forEach(function(t){e.dataSummaryTable[a]={materialName:l.value,materialType:t.value,numSum:0},e.dataSelected.forEach(function(n){n.materialName==l.value&&n.materialType==t.value&&(e.dataSummaryTable[a].numSum=e.addNum(e.dataSummaryTable[a].numSum,parseFloat(n.num)))}),a+=1})}),this.dataSummaryTableNew=this.dataSummaryTable}},computed:{}},p={render:function(){var e=this,a=e.$createElement,l=e._self._c||a;return l("div",{staticClass:"summaryTable"},[l("div",{staticClass:"timeSelector"},[l("span",[e._v("业务类型")]),e._v(" "),l("el-select",{staticClass:"dataselect",attrs:{placeholder:"业务类型"},model:{value:e.businessValue,callback:function(a){e.businessValue=a},expression:"businessValue"}},e._l(e.businessOptions,function(e){return l("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),l("span",[e._v("入库日期")]),e._v(" "),l("el-date-picker",{staticClass:"dataselect",attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"记录开始日期","end-placeholder":"记录结束日期","picker-options":e.pickerOptions,"value-format":"yyyy-MM-dd"},model:{value:e.inputDay,callback:function(a){e.inputDay=a},expression:"inputDay"}}),e._v(" "),l("span",[e._v("日期")]),e._v(" "),l("el-date-picker",{staticClass:"dataselect",attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"使用开始日期","end-placeholder":"使用结束日期","picker-options":e.pickerOptions,"value-format":"yyyy-MM-dd"},model:{value:e.repairDay,callback:function(a){e.repairDay=a},expression:"repairDay"}}),e._v(" "),l("el-button",{attrs:{type:"primary",round:""},on:{click:function(a){return e.selectData()}}},[e._v("生成报表")])],1),e._v(" "),l("div",{staticClass:"inforBox"},[l("el-table",{staticStyle:{width:"100%"},attrs:{data:e.dataSummaryTableNew,height:"550",border:"","default-sort":{prop:"numSum",order:"descending"}}},[l("el-table-column",{attrs:{type:"selection",align:"center",width:"50"}}),e._v(" "),l("el-table-column",{attrs:{fixed:"",prop:"materialName",label:"材料名称",align:"center",width:"250"}}),e._v(" "),l("el-table-column",{attrs:{prop:"materialType",label:"材料规格",align:"center",width:"250"}}),e._v(" "),l("el-table-column",{attrs:{prop:"numSum",label:"总数量",align:"center",width:"250"}})],1)],1)])},staticRenderFns:[]};var m=l("VU/8")(b,p,!1,function(e){l("LOib")},"data-v-44123cd4",null).exports;t.default.use(n.a);a.a=new n.a({routes:[{path:"/inputVue",name:"inputVue",component:u},{path:"/showAllVue",name:"showAllVue",component:d},{path:"/summaryTable",name:"summaryTable",component:m},{path:"*",name:"inputVue",component:u}]})},"afY/":function(e,a){},lp21:function(e,a){},ownV:function(e,a){},tvR6:function(e,a){}},["NHnr"]);
//# sourceMappingURL=app.881b6788f0448394fc1b.js.map